
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=cp1252" />
    <title>9.2. MPU9250_AK8963 3 DoF Motion Sensor</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="next" title="9.3. LSM303DLHC" href="LSM303DLHC_en.html" />
    <link rel="prev" title="9.1. MPU9250 6 DoF Motion Sensor" href="MPU9250_en.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="LSM303DLHC_en.html" title="9.3. LSM303DLHC"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="MPU9250_en.html" title="9.1. MPU9250 6 DoF Motion Sensor"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../Index.html">mbed_target_doc 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="_index_en.html" accesskey="U">9. Sensor</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="mpu9250-ak8963-3-dof-motion-sensor">
<h1>9.2. MPU9250_AK8963 3 DoF Motion Sensor</h1>
<p>Block enables the use of the AK8963 (MPU9250) with the STM32 boards.</p>
<div class="section" id="library">
<h2>9.2.1. Library</h2>
<p>I2C</p>
</div>
<div class="section" id="description">
<h2>9.2.2. Description</h2>
<a class="reference internal image-reference" href="../_images/AK8963.png"><img alt="../_images/AK8963.png" src="../_images/AK8963.png" style="width: 240.8px; height: 138.4px;" /></a>
<p>This block configured a digital MotionTracking device (MPU9250) on the selected I2C bus. MPU-9250 is a multi-chip module (MCM)
consisting of two dies integrated into a single package. One die houses the 3-Axis gyroscope and the 3-Axis accelerometer.
The other die houses the AK8963 3-Axis magnetometer from Asahi Kasei Microdevices Corporation. The two dies
supported different output data rates. The 3-Axis gyroscope and the 3-Axis accelerometer supported output data
rates up to 1kHz but the AK8963 3-Axis magnetometer supported only output data rates up to 100Hz.
Because of that this block gets only the data from the slow AK8963 3-Axis magnetometer. The block ‘’MPU9250 6 DoF Motion Sensor’’
gets the data from the 3-Axis gyroscope, the 3-Axis accelerometer and the temperature sensor.</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td colspan="2">special settings for AK8963:</td>
</tr>
<tr class="row-even"><td>DBIT = 1</td>
<td>Resolution = 16bit</td>
</tr>
<tr class="row-odd"><td>MODE[3:0]</td>
<td>Continuous measurement mode 2 = sample rate 100Hz</td>
</tr>
<tr class="row-even"><td>Magnetic sensor measurement rang</td>
<td>-49120mGs/+49120mGs</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-type-support">
<h2>9.2.3. Data Type Support</h2>
<p>The first output port provides the actual magnetism on the X axis as a double value in mGs, the second output port provides the actual magnetism on the Y axis as an double value in mGs and the third output port provides the actual magnetism on the Z axis as a double value in mGs.</p>
</div>
<div class="section" id="parameters-and-dialog-box">
<h2>9.2.4. Parameters and Dialog Box</h2>
<img alt="../_images/AK8963_Mask.png" src="../_images/AK8963_Mask.png" />
<div class="section" id="sample-time">
<h3>9.2.4.1. Sample time</h3>
<p>Set the sample time for this block.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The AK8963 needs at least 10 ms for one conversation (Sample time &gt; 0.01).
If the sample time for this block is faster than this time the sensor may not produce valid values.</p>
</div>
</div>
<div class="section" id="i2c-bus">
<h3>9.2.4.2. I2C Bus</h3>
<p>Selects the I2C bus of the used STM32 MCU. Before you can use a I2C bus with this block you need a configuration block (I2C Config) for the I2c bus. The port number is related to the actual I2C number referred to the datasheet of the MCU.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Not all MCUs provide all of the selectable I2c ports.</p>
</div>
</div>
<div class="section" id="sub-address">
<h3>9.2.4.3. Sub Address</h3>
<p>You can connected max. two MPU9250 devices on one I2C bus by using differnt I2C addresses by using the AD0 pin.
To selected the device with the AD0 pin connected to ground use sub address 0.
To selected the device with the AD0 pin connected to VCC use sub address 1.</p>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="LSM303DLHC_en.html" title="9.3. LSM303DLHC"
             >next</a> |</li>
        <li class="right" >
          <a href="MPU9250_en.html" title="9.1. MPU9250 6 DoF Motion Sensor"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../Index.html">mbed_target_doc 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="_index_en.html" >9. Sensor</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2017, CEA/ATM RG, HS Wismar.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>