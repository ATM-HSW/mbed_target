
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=cp1252" />
    <title>11.1.16. PowerSTEP01_GoUntil</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="next" title="11.1.17. PowerSTEP01_HardHiZ" href="PowerSTEP01_HardHiZ_en.html" />
    <link rel="prev" title="11.1.15. PowerSTEP01_Goto" href="PowerSTEP01_Goto_en.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="PowerSTEP01_HardHiZ_en.html" title="11.1.17. PowerSTEP01_HardHiZ"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="PowerSTEP01_Goto_en.html" title="11.1.15. PowerSTEP01_Goto"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../Index.html">mbed_target_doc 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="_index_en.html" >11. Motor Driver</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="_PowerSTEP01_en.html" accesskey="U">11.1. PowerSTEP01</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="powerstep01-gountil">
<h1>11.1.16. PowerSTEP01_GoUntil</h1>
<div class="section" id="description">
<h2>11.1.16.1. Description</h2>
<p>This block issues a PowerStep01 Go Until command to the selected motor driver.
After the motor driver recived the Go Until command a motion in the specified direction and with the specified speed is performed, until the switch input is connected to ground and the SW_F flag in the status register is forced high.
Then depending on the setting in the mask the specified action is performed and a Soft Stop command is issues.</p>
<a class="reference internal image-reference" href="../_images/powerSTEP01_GoUntil_block.png"><img alt="../_images/powerSTEP01_GoUntil_block.png" src="../_images/powerSTEP01_GoUntil_block.png" style="width: 250px;" /></a>
</div>
<div class="section" id="parameters-and-dialog-box">
<h2>11.1.16.2. Parameters and Dialog Box</h2>
<img alt="../_images/powerSTEP01_GoUntil_Mask.png" src="../_images/powerSTEP01_GoUntil_Mask.png" />
<div class="section" id="spi-port">
<h3>SPI Port</h3>
<p>specify the SPI port number that should be used by the block.</p>
</div>
<div class="section" id="motor-number">
<h3>Motor Number</h3>
<p>specifies the motor in the daisychain.</p>
</div>
<div class="section" id="ssel-port-pin">
<h3>SSEL Port/Pin</h3>
<p>specify the mcu pin which is connected to the chip select pin from the driver. This block supports the naming schema: ‘P’ + letter ‘A’, ‘B’, ‘C’, … + ‘_’ + number ‘0’, ‘1’, … ‘15’, e.g. PA_0.</p>
</div>
<div class="section" id="sample-time">
<h3>Sample Time</h3>
<p>specifies the time interval between samples. To inherit the sample time, set this parameter to -1.</p>
</div>
<div class="section" id="action">
<h3>Action</h3>
<p>specifies the action that should performed if the switch flag in the status register is forced high (switch input connected to ground).
The possible actions correspond to the values defined in the POWERSTEP01 class:</p>
<blockquote>
<div><p>ACTION_RESET –&gt; ABS_POS register is reset</p>
<p>ACTION_COPY –&gt; ABS_POS register value is copied into the MARK register</p>
</div></blockquote>
</div>
</div>
<div class="section" id="example">
<h2>11.1.16.3. Example</h2>
<img alt="../_images/powerSTEP01_GoUntil_example.png" src="../_images/powerSTEP01_GoUntil_example.png" />
</div>
<div class="section" id="code-generation">
<h2>11.1.16.4. Code Generation</h2>
<div class="section" id="initialization-function">
<h3>Initialization Function</h3>
<p>–</p>
</div>
<div class="section" id="step-function">
<h3>Step Function</h3>
<dl class="docutils">
<dt>creates two lines in void <strong>&lt;Model Name&gt;</strong>_step(void) function</dt>
<dd><dl class="first last docutils">
<dt>if ( <strong>&lt;ENABLE&gt;</strong>== 1 )</dt>
<dd>motor_<strong>&lt;Motor Number&gt;</strong>_spi <strong>&lt;SPI Port&gt;</strong>P<strong>&lt;SSEL Port Name&gt;</strong>_<strong>&lt;SSEL Pin Number&gt;</strong>-&gt;   GoUntil((motorAction_t) <strong>&lt;ACTION&gt;</strong>, (StepperMotor::direction_t) <strong>&lt;DIR&gt;</strong>, <strong>&lt;SPEED&gt;</strong>);</dd>
</dl>
</dd>
</dl>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="PowerSTEP01_HardHiZ_en.html" title="11.1.17. PowerSTEP01_HardHiZ"
             >next</a> |</li>
        <li class="right" >
          <a href="PowerSTEP01_Goto_en.html" title="11.1.15. PowerSTEP01_Goto"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../Index.html">mbed_target_doc 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="_index_en.html" >11. Motor Driver</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="_PowerSTEP01_en.html" >11.1. PowerSTEP01</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015-2017, CEA/ATM RG, HS Wismar.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>